# 负载均衡

**一.负载均衡种类**

>1.HTTP重定向负载均衡:根据用户的HTTP请求计算一台真实的WEB服务器地址，并将该WEB服务器地址写入HTPP重定向响应中返回给用户浏览器，这种负载均衡的优点是比较简单，缺点是浏览器需要两次请求服务器才能完成一次访问，性能较差


>2.DNS域名解析负载均衡:利用DNS处理域名解析请求的同时进行负载均衡，即在DNS服务器中配置多个A记录，优点DNS域名解析负载均衡省掉网站管理维护负载均衡服务器的麻烦，同时许多DNS还支持基于地理位置的域名解析，可以加快用户访问速度，缺点是没有控制权


>3.反向代理负载均衡:利用反向代理进行负载均衡，由于WEB服务器不直接对外提供访问，因此WEB服务器不需要使用外部地址，而反向代理服务器需要配置外网ip与内网ip，其优点是和反向代理服务器功能集成在一起，部署简单。缺点是反向代理服务器是所有请求和响应的中转站，其性能可能会成为瓶颈(Nginx,HAProxy)


>4.IP负载均衡:在网络层通过修改请求目标地址进行负载均衡，IP负载均衡在内核进程完成数据分发，较反向代理负载均衡有更好的处理性能。但还是有反向代理服务器的瓶颈缺点(LVS/NAT)


>5.数据链路层均衡:在通信协议的数据链路层修改mac地址进行负载均衡，这种方式通过配置真实服务器集群所有的虚拟ip和负载均衡服务器ip地址一致，从而达到不修改数据包的源ip与目的ip，只修改目的mac地址就可以进行数据分发功能，而且避免IP负载均衡的缺点(LVS/DR)

<br>

**二.负载均衡算法**

>1.(加权)轮询(Round Robin):所有请求被依次分发到每台应用服务器上


>2.(加权)随机(Random):请求被随机分配到各个应用服务器


>3.(加权)最少连接(Least Connections):记录每个应用服务器正在处理的连接数，将新的请求分发到最少连接的服务器上


>4.源地址散列(Source Hashing):根据请求来源ip地址进行hash计算，得到应用服务器，这样来自同一个ip地址的请求总在同一个服务器上处理
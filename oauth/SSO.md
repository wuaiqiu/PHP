# 单点登录

>单点登录(Single Sign On):是指在多系统应用群中登录一个系统，便可在其他所有系统中得到授权而无需再次登录，包括单点登录与单点注销两部分

**一.登录流程**

```
1.用户访问系统1(需要认证),系统1发现没有与用户的临时会话，跳转至sso认证中心，并将自己的地址作为参数(用于重定向).
2.sso认证中心发现用户未登录,将用户引导至登录页面.
3.用户输入用户名密码,sso认证中心校验用户信息,通过后就创建用户与sso认证中心之间的会话(全局会话),同时创建授权令牌.
4.sso认证中心带着令牌跳转会最初的请求地址(系统1).
5.系统1拿到令牌，去sso认证中心校验令牌是否有效.
6.sso认证中心校验令牌，返回有效，并注册系统1.
7.系统1使用该令牌创建与用户的会话(局部会话),返回请求的资源.
8.用户访问系统2(需要认证),系统2发现用户未登录,跳转至sso认证中心，并将自己的地址作为参数
9.sso认证中心发现用户已登录,跳转回系统2的地址,并附上令牌
10.系统2拿到令牌,去sso认证中心校验令牌是否有效
11.sso认证中心校验令牌，返回有效，注册系统2
12.系统2使用该令牌创建与用户的局部会话，返回请求的资源
```

<br>

**二.注销流程**

```
1.用户向系统1发起注销请求.
2.系统1根据用户与系统1建立的会话id拿到令牌,向sso认证中心发起注销请求.
3.sso认证中心校验令牌有效,销毁全局会话,同时取出所有用此令牌注册的系统地址.
4.sso认证中心向所有注册系统发起注销请求.
5.各注册系统接收sso认证中心的注销请求,销毁局部会话.
6.sso认证中心引导用户至登录页面.
```
						TRIGGER
						
	
	
1.简介


		触发器是一种与表操作有关的数据库对象，当触发器所在表上出现指定事件时，将调用该对象，即表的操作
		
事件触发表上的触发器的执行。


2.语法

	CREATE TRIGGER trigger_name
	trigger_time
	trigger_event ON tbl_name
	FOR EACH ROW
	BEGIN
	trigger_stmt
	END;
	其中：

	trigger_name：标识触发器名称，用户自行指定；
	trigger_time：标识触发时机，取值为 BEFORE 或 AFTER；
	trigger_event：标识触发事件，取值为 INSERT、UPDATE 或 DELETE；
	tbl_name：标识建立触发器的表名，即在哪张表上建立触发器；
	trigger_stmt：触发器程序体，可以是一句SQL语句，或者用 BEGIN 和 END 包含的多条语句。
	
	
3.NEW与OLD 详解

	MySQL中定义了NEW和OLD，用来表示触发器的所在表中，触发了触发器的那一行数据。
	在INSERT型触发器中,NEW用来表示将要（BEFORE）或已经（AFTER）插入的新数据；
	在UPDATE型触发器中,OLD用来表示将要或已经被修改的原数据，NEW 用来表示将要或已经修改为的新数据；
	在DELETE型触发器中,OLD用来表示将要或已经被删除的原数据；
	
	另外，OLD是只读的，而NEW则可以在触发器中使用SET赋值，这样不会再次触发触发器，造成循环调用
	（如每插入一个学生前，都在其学号前加“2013”）。
	
	
4.触发器操作

	(1)查看触发器

		SHOW TRIGGERS [FROM database_name];


	(2)删除触发器

		DROP TRIGGER [IF EXISTS] [database_name.]trigger_name

		
		
5.触发器的执行顺序

	我们建立的数据库一般都是InnoDB数据库，其上建立的表是事务性表，也就是事务安全的。这时，若

SQL语句或触发器执行失败，MySQL 会回滚事务，有：

	①如果 BEFORE 触发器执行失败,SQL 无法正确执行。
	②SQL 执行失败时,AFTER型触发器不会触发。
	③AFTER 类型的触发器执行失败,SQL 会回滚